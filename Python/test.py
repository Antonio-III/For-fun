def get_subsets_only_under_nth_main_set(n:int,all_sets:dict):
        d = {}
        main_set_name = f"S^{n}"
        for subset_key in all_sets[main_set_name]:
            d[subset_key]=all_sets[main_set_name][subset_key]

        return d  
all_sets = {'S^0': {'S^0_0': [(1, 0)]}, 'S^1': {'S^1_1': [(0.9, 30)], 'S^1_2': [(0.99, 60)]}, 'S^2': {'S^2_1': [(0.72, 45)], 'S^2_2': [(0.864, 60)], 'S^2_3': [(0.8928, 75)]}, 'S^3': {'S^3_1': [(0.36, 65), (0.432, 80)], 'S^3_2': [(0.54, 85), (0.648, 100)]}}
all_main_sets = {'S^0': [(1, 0)], 'S^1': [(0.9, 30), (0.99, 60)], 'S^2': [(0.72, 45), (0.864, 60), (0.8928, 75)], 'S^3': [(0.36, 65), (0.432, 80), (0.54, 85), (0.648, 100)]}
all_subsets = {'S^0_0': [(1, 0)], 'S^1_1': [(0.9, 30)], 'S^1_2': [(0.99, 60)], 'S^2_1': [(0.72, 45)], 'S^2_2': [(0.864, 60)], 'S^2_3': [(0.8928, 75)], 'S^3_1': [(0.36, 65), (0.432, 80)], 'S^3_2': [(0.54, 85), (0.648, 100)]}
                                                
d = {'S^2_1': [(0.72, 45), (0.6792, 75)], 'S^2_2': [(0.464, 60)], 'S^2_3': [(0.8928, 75)]}
a = [(0.72, 45), (0.5792, 75), (0.864, 60), (0.8928, 75)]

highest_r_in_last_device = (0.648, 100)
devices = 3

all_pairs = get_subsets_only_under_nth_main_set(n=3,all_sets=all_sets)
print(all_pairs)